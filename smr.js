const urlEnv="https://api.syncmyreviews.com";async function createIframe(t,e,a,n=null){const d=document.createElement("iframe");d.style.cssText="width: 1px; min-width: 100%; border: none; overflow: hidden; height: 100%;",d.setAttribute("data-default-styles","width: 1px; min-width: 100%; height: 100%; border: none;"),d.setAttribute("scrolling","no"),d.title="Sync My Reviews",d.id="iFrame"+e,window.addEventListener("message",(t=>{t.data&&t.data.iframeHeight&&t.source===d.contentWindow&&(d.style.height=t.data.iframeHeight+"px")}));const i=n||urlEnv;let o;return o="badge"===a?`/api/get-badge/${t}`:"feedback"===a?`/api/get-feedback/${t}/${n||"default"}`:`/api/get-widget/${t}`,d.src=`${i}${o}`,d}async function fetchDataFromBackend(t,e,a,n=null){const d=await createIframe(t,e,a,n),i=document.querySelector(`div[data-smr-token="${t}"], div[data-smr-pipeline-token="${t}"]`);i&&i.appendChild(d)}async function fetchAndPopulateData(t=null){const e=document.querySelectorAll("div[data-smr-token], div[data-smr-pipeline-token]");for(let a=0;a<e.length;a++){const n=e[a],d=n.getAttribute("data-smr-token")||n.getAttribute("data-smr-pipeline-token"),i=n.getAttribute("data-smr-type")||(n.getAttribute("data-smr-pipeline-token")?"feedback":"widget");await fetchDataFromBackend(d,a,i,t)}}document.addEventListener("DOMContentLoaded",(function(){console.log("smr_loaded"),fetchAndPopulateData()}));
